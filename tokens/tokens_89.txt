Небезопасный
код
Язык
программирования
Предисловие
Введение
чего
начать
Установка
Привет
Мир
Программирование
игры
загадки
Общие
концепции
Переменные
изменяемость
Типы
Данных
Функции
Комментарии
Управляющие
конструкции
Понимание
владения
Что
такое
владение
Ссылки
заимствование
Тип
среза
Использование
структур
объединения
связанных
Определение
создание
экземпляров
Пример
программы
использующей
структуры
Синтаксис
метода
Перечисления
сопоставление
образцом
Конструкция
потока
управления
Лаконичный
поток
Управление
растущими
проектами
помощью
пакетов
крейтов
модулей
Пакеты
крейты
областью
действия
конфиденциальностью
Пути
элемент
дереве
путей
область
видимости
ключевого
слова
коллекции
Хранение
списков
значений
векторами
закодированного
текста
строками
ключей
связанными
значениями
Обработка
ошибок
Неустранимые
ошибки
Устранимые
трейты
характеристики
время
жизни
Обобщённые
разделяемого
поведения
Валидация
ссылок
сроков
Написание
автоматических
тестов
Как
писать
тесты
выполнением
Организация
Проект
вводом
выводом
командной
строки
Получение
аргументов
Чтение
файла
Рефакторинг
обеспечения
модульности
улучшения
обработки
Разработка
функциональности
библиотеки
разработки
тестирование
Работа
переменными
среды
Запись
сообщений
ошибках
вместо
Функциональные
возможности
языка
итераторы
замыкания
анонимные
которые
захватывают
своё
окружение
последовательности
элементов
итераторов
Улучшение
нашего
проекта
Сравнение
производительности
циклы
Подробнее
Настройка
билдов
профилей
выпуска
Публикация
крейта
Рабочие
области
бинарных
файлов
Расширение
возможностей
добавления
пользовательских
команд
Умные
указатели
указания
данные
куче
умными
указателями
обычными
ссылками
трейта
Выполнение
кода
очистке
умный
указатель
подсчётом
внутренняя
Ссылочные
могут
привести
утечке
памяти
Безбоязненный
параллелизм
потоков
параллельного
выполнения
Пересылка
передачи
потоками
общим
состоянием
Расширяемый
трейтов
объектно
ориентированного
ориентированных
языков
трейт
объектов
допускающих
значения
разных
типов
Реализация
шаблона
проектирования
Шаблоны
Все
места
где
использоваться
Опровержимость
может
шаблон
соответствовать
Расширенные
Продвинутые
типажи
Макросы
Финальный
многопоточного
веб
сервера
однопоточного
Превращение
многопоточный
сервер
Мягкое
завершение
работы
очистка
Приложения
А
Ключевые
Операторы
символы
Выводимые
Полезные
инструменты
Редакции
Переводы
книги
создаётся
всех
предыдущих
главах
этой
мы
обсуждали
безопасность
котором
гарантируется
компиляции
Однако
внутри
скрывается
другой
который
обеспечивает
безопасной
памятью
Этот
называется
работает
также
первый
предоставляет
вам
дополнительные
существует
потому
своей
природе
статический
анализ
довольно
консервативен
компилятор
пытается
определить
соответствует
гарантиям
он
скорее
отвергнет
несколько
допустимых
программ
чем
пропустит
недопустимых
смотря
то
быть
порядке
будет
располагать
достаточной
информацией
убедиться
этом
таких
случаях
вы
можете
использовать
сказать
компилятору
Поверь
мне
я
знаю
делаю
имейте
виду
используете
свой
страх
риск
неправильно
возникнуть
проблемы
связанные
нарушением
безопасности
например
разыменование
нулевого
указателя
Другая
причина
которой
есть
небезопасное
альтер
эго
заключается
том
существу
аппаратное
обеспечение
компьютера
небезопасно
позволял
бы
выполнять
небезопасные
операции
могли
определённые
задачи
должен
позволить
системное
низкоуровневое
прямое
взаимодействие
операционной
системой
вашей
собственной
системы
Возможность
написания
низкоуровневого
системного
является
одной
целей
Давайте
рассмотрим
можно
делать
небезопасным
сверхспособности
Чтобы
переключиться
используйте
ключевое
слово
затем
начните
новый
блок
содержащий
небезопасном
пять
действий
недоступны
безопасном
называем
небезопасными
супер
силами
Эти
силы
включают
себя
следующее
сырого
Вызов
небезопасной
небезопасного
Доступ
изменение
изменяемой
статической
переменной
типажа
полям
Важно
понимать
отключает
проверку
заимствования
любые
другие
проверки
ссылку
коде
она
всё
равно
проверена
Единственное
делает
даёт
этим
пяти
возможностям
которых
проверяет
прежнему
получаете
некоторую
степень
блока
того
означает
этого
неизбежно
опасным
точно
иметь
безопасностью
цель
состоит
программист
гарантируете
обращаться
действительной
корректным
образом
Люди
подвержены
ошибкам
будут
происходить
требуя
размещение
этих
четырёх
небезопасных
блоков
помеченных
будете
знать
находиться
Делайте
блоки
маленькими
благодарны
себе
это
позже
исследовании
максимально
изолировать
рекомендуется
заключить
безопасную
абстракцию
предоставить
безопасный
обсудим
будем
обсуждать
методы
Части
стандартной
реализованы
проверенные
безопасные
абстракции
кодом
Оборачивание
предотвращает
возможную
утечку
использования
местах
ваши
пользователи
захотеть
напрямую
функциональность
реализованную
само
безопасно
поговорим
каждой
способностей
ходу
дела
некоторые
обеспечивают
интерфейс
сырых
указателей
главе
раздела
Недействительные
упоминали
гарантирует
всегда
действительны
имеет
два
новых
типа
называемых
сырыми
похожи
случае
сырые
неизменяемыми
изменяемыми
записываться
соответственно
Звёздочка
оператором
разыменования
часть
имени
контексте
неизменяемый
указателю
нельзя
присвоить
разыменован
отличие
умных
игнорировать
правила
неизменяемые
изменяемые
множество
изменяемых
одну
ту
гарантируют
ссылаются
действительную
память
реализуют
автоматическую
очистку
Отказавшись
гарантий
обменять
большую
производительность
взаимодействия
другим
языком
оборудованием
гарантии
применяются
листинге
показано
создать
изменяемый
сырой
Листинг
необработанных
Обратите
внимание
используем
создавать
можем
разыменовывать
пределами
увидите
чуть
создали
используя
приведения
неизменяемой
соответствующим
им
типам
их
непосредственно
гарантированно
являются
действительными
знаем
конкретные
предположение
любом
сыром
указателе
продемонстрировать
создадим
достоверности
которого
так
уверены
необработанный
произвольное
место
Попытка
произвольную
непредсказуемой
этому
адресу
оптимизировать
доступа
программа
завершиться
ошибкой
сегментации
Обычно
нет
веских
причин
такой
возможно
произвольный
адрес
Напомним
читать
они
указывают
оператор
требует
блоке
Только
попытке
объекту
получить
недопустимое
значение
примерах
хранится
попытаемся
неизменяемую
изменяемую
скомпилируется
нарушены
запрещающие
наличие
одновременно
изменять
изменяемого
потенциально
создавая
эффект
гонки
Будьте
осторожны
учётом
опасностей
зачем
тогда
Одним
основных
применений
следующем
разделе
случай
безопасных
абстракций
понимает
анализатор
заимствований
введём
понятие
функций
которая
использует
Второй
операций
выглядят
обычные
остальным
определением
них
дополнительное
данном
указывает
предъявляются
требования
должны
соблюдать
вызове
гарантировать
выполняем
Вызывая
небезопасную
функцию
говорим
прочитали
документацию
берём
ответственность
соблюдение
её
условий
небезопасная
функция
именем
ничего
своём
теле
вызвать
отдельном
попробуем
получим
ошибку
сообщаем
поняли
правильно
убедились
контракт
Тела
фактически
блоками
поэтому
других
нужно
добавлять
ещё
один
содержит
пометить
всю
самом
деле
обёртывание
обычная
абстракция
качестве
примера
некоторого
реализовать
метод
определён
срезов
берет
срез
превращает
его
разделяя
индексу
указанному
аргумента
Эту
реализации
могла
выглядеть
примерно
компилируется
простоты
реализуем
обобщённого
использованием
безопасного
Эта
сначала
получает
общую
длину
индекс
переданный
параметра
находится
границах
сравнивая
длиной
передадим
больше
длина
запаникует
попытки
индекса
возвращаем
фрагмента
кортеже
начала
исходного
включая
сам
конца
скомпилировать
понять
заимствуем
различные
хотим
осуществить
частей
одного
дважды
различных
принципе
нормально
перекрываются
недостаточно
умён
Когда
верный
значит
пришло
прибегнуть
небезопасному
коду
демонстрирует
вызовы
заработала
главы
срезы
состоят
длины
получения
сырому
Поскольку
нас
возвращает
сохранили
Далее
проверяем
обращаемся
принимает
создаёт
создания
начинающегося
имеющего
вызываем
начинается
создаём
оставшееся
количество
должна
полагаться
действителен
небезопасен
считать
местоположение
смещения
действительным
указателем
были
вынуждены
разместить
наших
вызовов
Посмотрев
добавив
утверждение
меньше
равен
необработанные
используемые
корректными
приемлемое
уместное
нам
помечать
результирующую
безопасным
допустимые
которым
Напротив
приведёт
вероятному
сбою
использовании
произвольного
адреса
владеем
произвольном
месте
никакой
созданный
фрагмент
допустимый
приводит
неопределённому
поведению
вызова
внешнего
Иногда
вашему
языке
потребоваться
написанным
другом
которое
облегчает
интерфейса
внешних
способ
другому
внешнему
языку
вызывать
настроить
интеграцию
функцией
объявленные
небезопасны
языки
правил
проверить
ложится
программиста
Имя
Объявление
написанной
перечисляем
имена
сигнатуры
другого
определяет
какой
бинарный
приложений
внешняя
уровне
ассемблера
наиболее
часто
используемым
следует
правилам
Си
позволяющего
языкам
целый
добавляем
указываем
ключевым
словом
необходимой
добавить
аннотацию
искажать
Искажение
меняет
дали
другое
информации
процесса
менее
читабельно
человека
каждого
искажает
разному
использована
другими
языками
отключить
имён
компиляторе
примере
делаем
доступной
скомпилирована
разделяемую
библиотеку
прилинкована
внесение
изменений
статическую
переменную
книге
говорили
глобальных
переменных
поддерживает
которыми
действующих
Если
обращаются
той
глобальной
гонке
Глобальные
называют
статическими
объявления
имеющей
строкового
Статические
константы
Различия
константами
статических
общему
соглашению
пишутся
нотации
указывать
хранить
временем
вывести
прописывать
явно
Тонкое
различие
имеют
фиксированный
доступны
одни
те
стороны
дублировать
свои
каждом
одно
Обращение
изменяемым
статическим
переменным
объявить
модифицировать
неё
определяем
Любой
читает
пишет
печатает
следовало
ожидать
выполняется
одном
потоке
нескольких
доступом
ситуации
глобально
трудным
реализацию
отсутствия
гонок
считает
Там
предпочтительно
техники
многопоточности
ориентированные
многопоточное
исполнение
Таким
сможет
данным
доступным
типажей
методов
некоторый
инвариант
объявляем
добавляя
помечая
даём
обещание
поддерживать
инварианты
вспомним
маркерные
реализует
автоматически
наши
полностью
являющийся
наш
передан
доступен
вручную
указать
объединений
Последнее
действие
похож
конкретном
экземпляре
объявленное
поле
основном
используются
объединениями
данный
момент
хранятся
объединениях
узнать
обсуждались
ошибочным
одобренным
корректный
сложнее
помочь
обеспечении
вас
явной
аннотации
отслеживание
источника
проблем
возникают
